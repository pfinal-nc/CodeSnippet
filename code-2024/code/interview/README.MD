### 面试题收集

1. 分布式锁有那些实现方式?

   > 1.基于数据库实现分布式锁
   >
   > 2.基于缓存 redis等实现分布式锁
   >
   > 3.基于 zookeeper实现分布式锁

2. Mysql死锁产生的原因是什么?

> 1.并发事务更新相同的数据集--当多个事务同时更新相同的数据集,并且使用了不同的顺序来获取锁时候,
> 就可能产生死锁。例如,事务A先锁住数据集X,然后尝试获取数据集Y的锁,而事务B先锁住数据集Y，然后尝试获取数据集X的锁, 这样就形成了死锁。
> 
> 2.事务持有锁等待其他事务释放锁--当一个事务持有一个资源的锁,并且尝试获取另一个事务持有的资源的锁时,如果另一个事务也在等待当前事务持有的锁释放,
> 就会导致死锁
> 
> 3.锁粒度过大: 当锁的粒度过大时，多个事务同时访问相同的资源时会增加死锁的可能性, 例如:
> 当一个事务锁定了整个表,而另一个事务也尝试锁定同一张表时,就可能产生死锁.
> 
> 4.事务超时或者异常终止: 如果一个事务在持有所得过程中出现了超时或者异常终止,而此时该事务持有的锁没有被释放,就可能导致其他事务在等待该所的释放时出现死锁
>

3.避免MySQL死锁的方法包括:

> 1.使用合适的事务持有锁的时间,以减少死锁的可能性
> 
> 2.尽量减少事务持有锁的时间,以缩短死锁发生的窗口
> 
> 3.优化数据库设计, 避免长时间持有锁和锁的粒度过大。
> 
> 4.监控和诊断数据库死锁, 并即使处理死锁事件
> 
> 5.在应用层面设计良好的事务管理策略,以最小化死锁的可能性
